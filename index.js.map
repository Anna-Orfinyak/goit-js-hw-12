{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '51014016-712075211dd4ddd9d92f84ca4';\nconst baseURL = 'https://pixabay.com/api/';\nconst qtyPerPage = 15;\n\nexport default class PixabayAPI {\n    constructor() {\n        this.query = '';\n        this.page = 1;\n    }\n\n    async getImagesByQuery() {\n        const params = {\n            key: API_KEY,\n            q: this.query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: this.page,\n            per_page: qtyPerPage,\n\n        };\n\n        const response = await axios.get(baseURL, { params });\n        this.page += 1;\n        return response.data;\n    }\n    \n    setQuery(newQuery) {\n        this.query = newQuery;\n        this.page = 1;\n    }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryList = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport function createGallery(images) {\n  const markup = images.map(image => `\n    <li class=\"gallery-item\">\n        <a href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" width=\"360\"/>\n        </a>\n        <div class=\"info\">\n            <div class=\"statistic-info\">  \n                <p class=\"statistic-item-name\">Likes</p>\n                <p class=\"statistic-item-value\">${image.likes}</p>\n            </div>\n            <div class=\"statistic-info\">\n                <p class=\"statistic-item-name\">Views</p>\n                <p class=\"statistic-item-value\">${image.views}</p>\n            </div>\n            <div class=\"statistic-info\">\n                <p class=\"statistic-item-name\">Comments</p>\n                <p class=\"statistic-item-value\">${image.comments}</p>\n            </div>\n            <div class=\"statistic-info\">\n                <p class=\"statistic-item-name\">Downloads</p>\n                <p class=\"statistic-item-value\">${image.downloads}</p>\n            </div>\n        </div>\n    </li>`).join('');\n\n  galleryList.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  galleryList.innerHTML = '';\n}\n\nexport function hideLoadMoreBtn() {\n  const loadMoreBtn = document.querySelector('.load-more');\n  console.log('Hiding button:', loadMoreBtn);\n  loadMoreBtn.classList.add('hidden');\n}\n\nexport function showLoadMoreBtn() {\n  const loadMoreBtn = document.querySelector('.load-more');\n  loadMoreBtn.classList.remove('hidden');\n}\n\nexport function showLoader() {\n  const loader = document.querySelector('.loader');\n  loader.classList.remove('hidden');\n  }\n\nexport function hideLoader() {\n    const loader = document.querySelector('.loader');\n    loader.classList.add('hidden');\n  }\n\n\n  ","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport PixabayAPI from \"./js/pixabay-api.js\"\n\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreBtn,\n  hideLoadMoreBtn\n} from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more');\nhideLoadMoreBtn();\nconst pixabay = new PixabayAPI();\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  const input = form.elements['search-text'];\n  const query = input.value.trim();\n\n  if (!query) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search term.',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  pixabay.setQuery(query);\n  clearGallery();\n  hideLoadMoreBtn();\n  showLoader();\n\n  try {\n    const data = await pixabay.getImagesByQuery();\n\n    if (data.hits.length === 0) {\n      iziToast.info({\n        title: 'No Results',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    createGallery(data.hits);\n\n    if ((pixabay.page - 1) * 15 < data.totalHits) {\n      showLoadMoreBtn();\n    } else {\n      hideLoadMoreBtn();\n      iziToast.info({\n        title: 'End of results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  showLoader();\n  try {\n    const data = await pixabay.getImagesByQuery();\n    createGallery(data.hits);\n\n    const galleryItem = document.querySelector('.gallery-item');\n    if (galleryItem) {\n      const { height } = galleryItem.getBoundingClientRect();\n      window.scrollBy({\n        top: height * 2,\n        behavior: 'smooth',\n      });\n    }\n\n    if ((pixabay.page - 1) * 15 >= data.totalHits) {\n      hideLoadMoreBtn();\n      iziToast.info({\n        title: 'End of results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Could not load more images.',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["API_KEY","baseURL","qtyPerPage","PixabayAPI","params","response","axios","newQuery","galleryList","lightbox","SimpleLightbox","createGallery","images","markup","image","clearGallery","hideLoadMoreBtn","loadMoreBtn","showLoadMoreBtn","showLoader","hideLoader","form","pixabay","event","query","iziToast","data","galleryItem","height"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAU,2BACVC,EAAa,GAEJ,MAAMC,CAAW,CAC5B,aAAc,CACV,KAAK,MAAQ,GACb,KAAK,KAAO,CACf,CAED,MAAM,kBAAmB,CACrB,MAAMC,EAAS,CACX,IAAKJ,EACL,EAAG,KAAK,MACR,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAM,KAAK,KACX,SAAUE,CAEtB,EAEcG,EAAW,MAAMC,EAAM,IAAIL,EAAS,CAAE,OAAAG,CAAM,CAAE,EACpD,YAAK,MAAQ,EACNC,EAAS,IACnB,CAED,SAASE,EAAU,CACf,KAAK,MAAQA,EACb,KAAK,KAAO,CACf,CACL,CC9BA,MAAMC,EAAc,SAAS,cAAc,UAAU,EACtC,SAAS,cAAc,SAAS,EAC3B,SAAS,cAAc,YAAY,EAEvD,MAAMC,EAAW,IAAIC,EAAe,YAAY,EAEzC,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAASD,EAAO,IAAIE,GAAS;AAAA;AAAA,mBAElBA,EAAM,aAAa;AAAA,oBAClBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,kDAKRA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,kDAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,kDAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,kDAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,UAGvD,EAAE,KAAK,EAAE,EAEjBN,EAAY,mBAAmB,YAAaK,CAAM,EAClDJ,EAAS,QAAO,CAClB,CAEO,SAASM,GAAe,CAC7BP,EAAY,UAAY,EAC1B,CAEO,SAASQ,GAAkB,CAChC,MAAMC,EAAc,SAAS,cAAc,YAAY,EACvD,QAAQ,IAAI,iBAAkBA,CAAW,EACzCA,EAAY,UAAU,IAAI,QAAQ,CACpC,CAEO,SAASC,GAAkB,CACZ,SAAS,cAAc,YAAY,EAC3C,UAAU,OAAO,QAAQ,CACvC,CAEO,SAASC,GAAa,CACZ,SAAS,cAAc,SAAS,EACxC,UAAU,OAAO,QAAQ,CAC/B,CAEI,SAASC,GAAa,CACV,SAAS,cAAc,SAAS,EACxC,UAAU,IAAI,QAAQ,CACjC,CChDA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCJ,EAAc,SAAS,cAAc,YAAY,EACvDD,IACA,MAAMM,EAAU,IAAInB,EAEpBkB,EAAK,iBAAiB,SAAU,MAAME,GAAS,CAC7CA,EAAM,eAAc,EAGpB,MAAMC,EADQH,EAAK,SAAS,aAAa,EACrB,MAAM,KAAI,EAE9B,GAAI,CAACG,EAAO,CACVC,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,8BACT,SAAU,UAChB,CAAK,EACD,MACD,CAEDH,EAAQ,SAASE,CAAK,EACtBT,IACAC,IACAG,IAEA,GAAI,CACF,MAAMO,EAAO,MAAMJ,EAAQ,mBAE3B,GAAII,EAAK,KAAK,SAAW,EAAG,CAC1BD,EAAS,KAAK,CACZ,MAAO,aACP,QAAS,2EACT,SAAU,UAClB,CAAO,EACD,MACD,CAEDd,EAAce,EAAK,IAAI,GAElBJ,EAAQ,KAAO,GAAK,GAAKI,EAAK,UACjCR,KAEAF,IACAS,EAAS,KAAK,CACZ,MAAO,iBACP,QAAS,6DACT,SAAU,UAClB,CAAO,EAGJ,MAAe,CACdA,EAAS,MAAM,CACb,MAAO,QACP,QAAS,gDACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRL,GACD,CACH,CAAC,EAEDH,EAAY,iBAAiB,QAAS,SAAY,CAChDE,IACA,GAAI,CACF,MAAMO,EAAO,MAAMJ,EAAQ,mBAC3BX,EAAce,EAAK,IAAI,EAEvB,MAAMC,EAAc,SAAS,cAAc,eAAe,EAC1D,GAAIA,EAAa,CACf,KAAM,CAAE,OAAAC,CAAM,EAAKD,EAAY,sBAAqB,EACpD,OAAO,SAAS,CACd,IAAKC,EAAS,EACd,SAAU,QAClB,CAAO,CACF,EAEIN,EAAQ,KAAO,GAAK,IAAMI,EAAK,YAClCV,IACAS,EAAS,KAAK,CACZ,MAAO,iBACP,QAAS,6DACT,SAAU,UAClB,CAAO,EAEJ,MAAe,CACdA,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8BACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRL,GACD,CACH,CAAC"}